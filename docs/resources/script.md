---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "mssql_script Resource - terraform-provider-mssql"
subcategory: ""
description: |-
  Allows execution of arbitrary SQL scripts to check state and apply desired state.
  -> Note This resource is meant to be an escape hatch for all cases not supported by the provider's resources. Whenever possible, use dedicated resources, which offer better plan, validation and error reporting.
---

# mssql_script (Resource)

Allows execution of arbitrary SQL scripts to check state and apply desired state. 

-> **Note** This resource is meant to be an escape hatch for all cases not supported by the provider's resources. Whenever possible, use dedicated resources, which offer better plan, validation and error reporting.

## Example Usage

```terraform
data "mssql_database" "test" {
  name = "test"
}

resource "mssql_script" "cdc" {
  database_id = data.mssql_database.test.id

  read_script   = "SELECT COUNT(*) AS [is_enabled] FROM sys.change_tracking_databases WHERE database_id=${data.mssql_database.test.id}"
  delete_script = "ALTER DATABASE [${data.mssql_database.test.name}] SET CHANGE_TRACKING = OFF"

  update_script = <<SQL
IF (SELECT COUNT(*) FROM sys.change_tracking_databases WHERE database_id=${data.mssql_database.test.id}) = 0
  ALTER DATABASE [${data.mssql_database.test.name}] SET CHANGE_TRACKING = ON
SQL

  state = {
    is_enabled = "1"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `database_id` (String) ID of database. Can be retrieved using `mssql_database` or `SELECT DB_ID('<db_name>')`.
- `read_script` (String) SQL script returning current state of the DB. It must return single-row result set where column names match the keys of `state` map and all values are strings that will be compared against `state` to determine if the resource state matches DB state.
- `state` (Map of String) Desired state of the DB. It is arbitrary map of string values that will be compared against the values returned by the `read_script`.
- `update_script` (String) SQL script executed when the desired state specified in `state` attribute does not match the state returned by `read_script`

### Optional

- `create_script` (String) SQL script executed when the resource does not exist in Terraform state. When not provided, `update_script` will be used to create the resource.
- `delete_script` (String) SQL script executed when the resource is being destroyed. When not provided, no action will be taken during resource destruction.

### Read-Only

- `id` (String) Used only internally by Terraform. Always set to `script`


